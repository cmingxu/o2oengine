$(".loading_indicator").addClass('hide');

var package = '<%= @pay_config[:package] %>';
var timeStamp = '<%= @pay_config[:timeStamp] %>';
var nonceStr = '<%= @pay_config[:nonceStr] %>';
var signType = '<%= @pay_config[:signType] %>';
var paySign = '<%= @pay_config[:paySign] %>';


alert(package);
alert(timeStamp);
alert(nonceStr);
alert(signType);
alert(paySign);

alert(wx.chooseWXPay);

wx.chooseWXPay({
  timestamp: timeStamp,
  nonceStr: nonceStr,
  package: package,
  signType: signType,
  paySign: paySign,
  success: function (res) {
    setTimeout(function () {
      window.location.href = "/wechat/order_confirm";
    }, 100);
  }
});
